(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b245d8b8"],{b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,r=Function.prototype,l=r.toString,n=/^\s*function ([^ (]*)/,s="name";a&&!(s in r)&&o(r,s,{configurable:!0,get:function(){try{return l.call(this).match(n)[1]}catch(e){return""}}})},b789:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),o={class:"container"},r={class:"text-end"},l={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},n=Object(a["createTextVNode"])(" 清空購物車 "),s={class:"table align-middle"},d=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th"),Object(a["createVNode"])("th",null,"品名"),Object(a["createVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(a["createVNode"])("th",null,"金額")])],-1),i={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},u=Object(a["createTextVNode"])(" x "),b={class:"input-group input-group-sm"},m={class:"input-group mb-3"},p={class:"input-group-text",id:"basic-addon2"},O={key:1},j=Object(a["createVNode"])("td",{colspan:"4",class:"text-center"},"購物車內無品項",-1),f=Object(a["createVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),h={key:0},V=Object(a["createVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),N={class:"text-success"},g={class:"my-5 row justify-content-center"},v={class:"mb-3"},y=Object(a["createVNode"])("label",{for:"name",class:"form-lable"},"姓名",-1),k={class:"mb-3"},C=Object(a["createVNode"])("label",{for:"name",class:"form-lable"},"Email",-1),x={class:"mb-3"},w=Object(a["createVNode"])("label",{for:"name",class:"form-lable"},"電話",-1),B={class:"mb-3"},I=Object(a["createVNode"])("label",{for:"name",class:"form-lable"},"地址",-1),S={class:"mb-3"},q=Object(a["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),D=Object(a["createVNode"])("div",{class:"text-end"},[Object(a["createVNode"])("button",{type:"submit",class:"btn btn-primary"}," 送出訂單 ")],-1);function U(e,t,c,U,$,A){var L=Object(a["resolveComponent"])("Loading"),F=Object(a["resolveComponent"])("Field"),T=Object(a["resolveComponent"])("error-message"),_=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(L,{active:$.isLoading},null,8,["active"]),Object(a["createVNode"])("div",o,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[1]||(t[1]=function(){return A.deleteAllCart&&A.deleteAllCart.apply(A,arguments)}),disabled:0===$.cart.carts.length||"deleteAll"===$.cartId},["deleteAll"===$.cartId?(Object(a["openBlock"])(),Object(a["createBlock"])("i",l)):Object(a["createCommentVNode"])("",!0),n],8,["disabled"])]),Object(a["createVNode"])("table",s,[d,Object(a["createVNode"])("tbody",null,[$.cart.carts.length>0?(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],{key:0},Object(a["renderList"])($.cart.carts,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return A.deleteCart(e)},disabled:$.cartId===e.id},[$.cartId===e.id?(Object(a["openBlock"])(),Object(a["createBlock"])("i",i)):Object(a["createCommentVNode"])("",!0),u],8,["onClick","disabled"])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.product.title),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",b,[Object(a["createVNode"])("div",m,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return A.updateCart(e)},disabled:$.cartId===e.id,min:"1",type:"number",class:"form-control"},null,40,["onUpdate:modelValue","onChange","disabled"]),[[a["vModelText"],e.qty,void 0,{number:!0}]]),Object(a["createVNode"])("span",p,Object(a["toDisplayString"])(e.product.unit),1)])])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.final_total),1)])})),128)):(Object(a["openBlock"])(),Object(a["createBlock"])("tr",O,[j]))]),Object(a["createVNode"])("tfoot",null,[Object(a["createVNode"])("tr",null,[f,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])($.cart.total),1)]),$.cart.final_total!==$.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",h,[V,Object(a["createVNode"])("td",N,Object(a["toDisplayString"])($.cart.final_total),1)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",g,[Object(a["createVNode"])(_,{onSubmit:A.createOrder,class:"col-md-6"},{default:Object(a["withCtx"])((function(e){var c=e.errors;return[Object(a["createVNode"])("div",v,[y,Object(a["createVNode"])(F,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入 姓名",rules:"required",modelValue:$.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return $.form.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(T,{name:"姓名",class:"invalid-feedback"})]),Object(a["createVNode"])("div",k,[C,Object(a["createVNode"])(F,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":c["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:$.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return $.form.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(T,{name:"email",class:"invalid-feedback"})]),Object(a["createVNode"])("div",x,[w,Object(a["createVNode"])(F,{id:"tel",name:"電話",type:"text",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入 電話",rules:A.isPhone,modelValue:$.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return $.form.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["createVNode"])(T,{name:"電話",class:"invalid-feedback"})]),Object(a["createVNode"])("div",B,[I,Object(a["createVNode"])(F,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入 地址",rules:"required",modelValue:$.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return $.form.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(T,{name:"地址",class:"invalid-feedback"})]),Object(a["createVNode"])("div",S,[q,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{name:"message",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[6]||(t[6]=function(e){return $.form.message=e})},null,512),[[a["vModelText"],$.form.message]])]),D]})),_:1},8,["onSubmit"])])])],64)}c("99af");var $=c("1940"),A=c.n($),L={data:function(){return{cart:{carts:[]},isLoading:!1,cartId:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fred8196","/cart");this.$http.get(t).then((function(t){t.data.success&&(e.cart=t.data.data,e.isLoading=!1)})).catch((function(e){console.log(e)}))},deleteCart:function(e){var t=this;this.cartId=e.id;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fred8196","/cart/").concat(e.id);this.$http.delete(c).then((function(c){c.data.success&&(A()(e.product.title+c.data.message),t.getCart(),t.cartId="")})).catch((function(e){console.log(e)}))},updateCart:function(e){var t=this;this.cartId=e.id;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fred8196","/cart/").concat(e.id);this.$http.put(c,{data:{product_id:e.product.id,qty:e.qty}}).then((function(e){t.getCart(),t.cartId=""}))},deleteAllCart:function(){var e=this;this.cartId="deleteAll";var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fred8196","/carts");this.$http.delete(t).then((function(t){t.data.success&&(console.log(t),e.getCart(),e.cartId="")}))},createOrder:function(){var e=this;if(0!==this.cart.carts.length){var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fred8196","/order");this.$http.post(t,{data:this.form}).then((function(t){t.data.success&&(console.log(t),e.getCart(),A()({title:t.data.message,icon:"success",button:!1,timer:1e3}),setTimeout((function(){e.$router.push("/products")}),1e3))})).catch((function(e){console.log(e)}))}else A()({title:"請加入品項至購物車",icon:"error",button:!1,timer:1e3})},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"請輸入正確電話號碼"}},mounted:function(){this.getCart()}};L.render=U;t["default"]=L}}]);
//# sourceMappingURL=chunk-b245d8b8.373a5935.js.map